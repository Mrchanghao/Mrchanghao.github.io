<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="재귀함수
재귀란? 주어진 문제를 자기 반복적인 문제들로 잘게 분해한 다음, 이들을 다시 조합해 원래 문제의 정답을 찾는 기법 

재귀 함수의 주요 구성요소

기저 케이스(base case) -&amp;gt; 종료 조건이라고도 한다
재귀 케이스 

기저 케이스는 재귀 함수가 구">
    

    <!--Author-->
    
        <meta name="author" content="Chang Hao">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="재귀 함수와 성능"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Chang Hao의 Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>재귀 함수와 성능 - Chang Hao의 Blog</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 ph5-ns ph3 text-light">
    
    <nav class="db dt-l w-100 mw8 center border-box pv3">
        <a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="Chang Hao의 Blog">
            <img src="http://www.codeblocq.com/assets/projects/hexo-theme-anodyne/assets/anodyne.svg" class="dib h3" alt="Chang Hao의 Blog">
        </a>
        <div class="db dtc-l v-mid w-100 w-75-l tc tr-l">
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/" 
                    title="Home">
                    Home
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/tags/frontend" 
                    title="frontend">
                    frontend
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/tags/backend" 
                    title="backend">
                    backend
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/tags/Music" 
                    title="Music">
                    Music
                </a>
            
        </div>
    </nav>

    <!-- Title -->
    <div class="w-100 mw8 center vh-40 dt">
        <div class="dtc v-mid white">
            <h1 class="f1-l f2-m tc tc-m tl-ns">재귀 함수와 성능</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2018-05-14</p>
        </div>
    </div>

    <!-- Icon -->
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon fa fa-file-text-o"></i>
    </div>
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    
                        <div class="tags-container-vertical">
                            <div class="tags-sub-container">
                                <a class="fw3 ph1 dib" href="/tags/backend/">#backend</a>
                            </div>
                        </div>
                    

                    <!-- Main Post Content -->
                    <h1 id="재귀함수"><a href="#재귀함수" class="headerlink" title="재귀함수"></a>재귀함수</h1><blockquote>
<p>재귀란? 주어진 문제를 자기 반복적인 문제들로 잘게 분해한 다음, 이들을 다시 조합해 원래 문제의 정답을 찾는 기법 </p>
</blockquote>
<p>재귀 함수의 주요 구성요소</p>
<ul>
<li>기저 케이스(base case) -&gt; 종료 조건이라고도 한다</li>
<li>재귀 케이스 </li>
</ul>
<p>기저 케이스는 재귀 함수가 구체적인 결과값을 바로 계산할 수 있는 입력 집합</p>
<p>재귀 케이스는 함수가 자신을 호출할 때 전달한 입력 집합을 처리한다. </p>
<h2 id="재귀적-사고란"><a href="#재귀적-사고란" class="headerlink" title="재귀적 사고란?"></a>재귀적 사고란?</h2><hr>
<p>재귀적 객체는 스스로를 정의한다. 가령 트리 구조에서 가지를 합성한다고 하면 어떤 가지는 다른가지 처럼 잎이 붙어 있고 이 앞에는 또 다른 잎과 가지가 달려 있을 수 있다. 이런 프로세스가 끝없이 이어지다가 어떤 외부적인 한정 요소에 이르면 멈추게 된다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 연속된 숫자의 합</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> acc = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= number; i++) &#123;</span><br><span class="line">        acc += i</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 이 코드를 재귀적으로 바꿔 보자 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum2</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(number &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> number + sum2(number - <span class="number">1</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위의 재귀 함수를 살펴보자 </p>
<p>일단 예로 sum(5)의 처리 과정을 살펴보면 첫번째 값으로 0이 들어가고 기저케이스로서 0을 반환한다. 그 이상의 두번째 값부터는 계속 재귀적으로 더해간다. 이때 내부적으로 재귀 호출 스택이 겹겹이 쌓이게 되고 알고리즘이 종료 조건(5에 다다랐을 때)에 이르면 쌓인 스택이 런타임에 의해 풀리면서 반환문이 모두 실행되고 이 과정에서 실제 덧셈이 이루어지게 되는 것이다. </p>
<h2 id="재귀-함수의-성능"><a href="#재귀-함수의-성능" class="headerlink" title="재귀 함수의 성능"></a>재귀 함수의 성능</h2><hr>
<p>위의 재귀함수에서 한 가지 문제점이 있다. 재귀 함수의  arguments의 수가 커지면 결국 위에서 살펴본 것 처럼 호출 스택이 계속해서 쌓이게 되고  결국 Maxsimum call Stack  에러 메시지가 나면서 프로그램이 뻥난다는 것이다. </p>
<p><img src="/images/recursiveTest2.png" alt="테스트 결과"></p>
<p>즉, 계산은 쉽지만 성능 자체는 그렇게 좋지 않다는 결론이 나온다. 하지만 메모이제이션(Memoization)이란 기술을 이용하면 재귀함수의 성능을 향상 시킬 수 있다는 <a href="https://www.zerocho.com/category/JavaScript/post/579248728241b6f43951af19" target="_blank" rel="noopener">제로초님의 블로그 글</a>을 보게 되고 실제로 한번 테스트를 해 보았다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> save= &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> fact = <span class="function"><span class="keyword">function</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(number &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> saved = save[number <span class="number">-1</span>] || fact(number <span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">var</span> result = number + saved;</span><br><span class="line">            save[number] = result;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fact;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>클로저를 이용해서 지정한 save 객체에 값들을 저장해 놓고 마지막에 결과값을 최종 리턴 하는 것 같은데 내가 테스트 코드를 작성 해 봤을 때는 사실 크게 성능 상으로는 변동이 없었다… 물론 테스트 코드와 스펙을 결과값 위주로만 변동을 준 이유도 있겠지만 그래서 궁금한 나머지 제로초님의 블로그 내용 그대로 피보나찌 알고리즘도 테스트 해봤다.<br>일단 코드는 아래와 같고 메모이제이션 코드 자체는 따로 헬퍼 함수로 빼서 나중에 묶어 버렸다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">slowfib</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">return</span>  slowfib(n - <span class="number">1</span>) + slowfib(n <span class="number">-2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">memoize</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> save = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(save[args]) &#123;</span><br><span class="line">            <span class="keyword">return</span> save[args];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> result = fn.apply(<span class="keyword">this</span>, args)</span><br><span class="line">        save[args] = result;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> fib = memoize(slowfib)</span><br></pre></td></tr></table></figure>
<p>위의 코드는 유데미 사이트 알고리즘 강좌에서 배운 피보나찌 수열 해결 방법이다. 일단 memoize 함수를 헬퍼 함수로 이용하면 어떤 함수에도 써 먹을 수 있기 때문에 내부에 클로저를 사용하는 것 보다는 편리할 것 같다. 테스트 결과 일반 재귀함수 보다는 약간의 성능 차가 있긴 있었다.</p>
<p><img src="/images/finotest.png" alt="테스트결과"></p>
<p>역시나 그래도 두 함수모두 fib(49), slowfib(49) 등의 큰 수를 넣으면 여지 없이 뻥이 나 버렸다. </p>
<h2 id="결론"><a href="#결론" class="headerlink" title="결론"></a>결론</h2><hr>
<p>재귀함수의 성능에 대해서는 함수형 자바스크립트(루이스 아텐시오 저)에 의하면 꼬리 호출 최적화라는 기법도 있다는데 사실 이 부분은 읽어도 이해 자체가 가지 않는다. 그리고 자료구조형에도 재귀적 모형이 쓰인다고 한다. 이 책에서도 결국 핵심은 자기 반복적 문제를 해결하는데 쓰인다는게 핵심 내용 일 것이다. 사실 아직 실무자가 아닌 나로서는 이런 재귀형 알고리즘이 어디에 쓰이는지가 궁금하다. 그리고 무엇보다 성능 최적화가 가장 궁금하다… </p>
<blockquote>
<p>추가 자료 및 참조링크 </p>
<ul>
<li><a href="https://www.zerocho.com/category/JavaScript/post/579248728241b6f43951af19" target="_blank" rel="noopener">제로초님의 블로그 글</a></li>
<li><a href="http://www.yes24.com/24/goods/58181696?scode=029" target="_blank" rel="noopener">함수형 프로그래밍</a></li>
<li><a href="https://www.udemy.com/coding-interview-bootcamp-algorithms-and-data-structure/learn/v4/overview" target="_blank" rel="noopener">udemy The Coding Interview Bootcamp: Algorithms + Data Structures </a></li>
</ul>
</blockquote>

                    
                    <!-- Tags Bottom -->
                    
                        <div class="tags-container-bottom">
                            <i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/backend/">#backend</a>
                        </div>
                    

                    <!-- Comments -->
                    



                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 1: About -->
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="http://tachyons.io/img/avatar_1.jpg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="Chang Hao">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 2: Categories -->
                    

                    <!-- Widget 3: Recent Posts -->
                    <div class="mt5 tc tl-l">
    <h3>Recent Posts</h3>
    
        <p>
            <a href="/2018/07/24/backend/findNth/">N번째로 큰 배열 원소 찾기</a>
        </p>
    
        <p>
            <a href="/2018/07/24/backend/Square_Every_Digit/">Square Every Digit</a>
        </p>
    
        <p>
            <a href="/2018/07/18/backend/removeMinimum/">removeMinimum</a>
        </p>
    
        <p>
            <a href="/2018/07/14/backend/vowelIndex/">VowelIndex?</a>
        </p>
    
        <p>
            <a href="/2018/07/04/backend/orderdArray/">Are the numbers in order?</a>
        </p>
    
</div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<div class="bg-1 ph2 ph5-ns pv5">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/Mrchanghao" target="_blank">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:lnl2048@gmail.com" target="_blank">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="/#" target="_blank">
                            <i class="fa fa-rss"></i>
                        </a>
                    </div>
                
            </div>
            <div class="f6 f5-ns center tc white pt5 fw3">
                @Untitled. All right reserved | Design & Hexo <a class="link dim white" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
            </div>
        </div>
    </div>

<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>